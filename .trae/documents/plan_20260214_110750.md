## Sepet Takip Sorunu ve Çözümü

### Sorun:
Sepete ürün eklenmiyor çünkü **veritabanına kaydedilmiyor**! 
- Cart localStorage'a kaydediliyor
- Ama `abandoned_carts` tablosuna yazılmıyor

### Çözüm:
Cart context'e abandoned cart kaydetme özelliği ekle:

```tsx
// cart-context.tsx içine eklenecek:
const saveToAbandonedCart = async (items: CartItem[]) => {
  if (items.length === 0) return;
  
  const sessionId = typeof window !== 'undefined' 
    ? localStorage.getItem('ezmeo_session_id') || crypto.randomUUID()
    : null;
    
  if (typeof window !== 'undefined' && !localStorage.getItem('ezmeo_session_id')) {
    localStorage.setItem('ezmeo_session_id', sessionId);
  }

  const total = items.reduce((sum, item) => sum + (item.variant.price * item.quantity), 0);
  
  await fetch('/api/abandoned-carts', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      session_id: sessionId,
      items: items.map(item => ({
        product_id: item.productId,
        variant_id: item.variantId,
        name: item.product.name,
        price: item.variant.price,
        quantity: item.quantity,
        image: item.product.images?.[0]
      })),
      total,
      item_count: items.reduce((sum, item) => sum + item.quantity, 0),
      is_anonymous: true,
      status: 'active'
    })
  });
}
```

Sonra `addToCart` fonksiyonunda bu çağırılacak.